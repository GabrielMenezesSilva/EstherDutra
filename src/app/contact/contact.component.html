<section class="contact-section">
  <h2 class="contact-title">
    <i class="fas fa-envelope"></i>
    Contactez-moi
  </h2>
  <div class="contact-container">
    <div class="contact-form">
      <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>
            <i class="fas fa-user"></i>
            Nom
          </label>
          <div class="input-wrapper">
            <input type="text" formControlName="name" placeholder="Votre nom" />
          </div>
          <div
            class="error-message"
            *ngIf="
              contactForm.get('name')?.invalid &&
              contactForm.get('name')?.touched
            "
          >
            Le nom est requis et doit contenir au moins 2 caractères
          </div>
        </div>
        <div class="form-group">
          <label>
            <i class="fas fa-envelope"></i>
            Email
          </label>
          <div class="input-wrapper">
            <input
              type="email"
              formControlName="email"
              placeholder="Votre email"
            />
          </div>
          <div
            class="error-message"
            *ngIf="
              contactForm.get('email')?.invalid &&
              contactForm.get('email')?.touched
            "
          >
            Veuillez entrer un email valide
          </div>
        </div>
        <div class="form-group">
          <label>
            <i class="fas fa-comment"></i>
            Message
          </label>
          <div class="input-wrapper">
            <textarea
              formControlName="message"
              placeholder="Votre message"
            ></textarea>
          </div>
          <div
            class="error-message"
            *ngIf="
              contactForm.get('message')?.invalid &&
              contactForm.get('message')?.touched
            "
          >
            Le message est requis et doit contenir au moins 10 caractères
          </div>
        </div>
        <button
          type="submit"
          class="submit-btn"
          [disabled]="!contactForm.valid || isSubmitting"
        >
          <i
            class="fas"
            [ngClass]="isSubmitting ? 'fa-spinner fa-spin' : 'fa-paper-plane'"
          ></i>
          {{ isSubmitting ? "Envoi en cours..." : "Envoyer le Message" }}
        </button>

        <div class="form-feedback" *ngIf="submitSuccess || submitError">
          <div class="success-message" *ngIf="submitSuccess">
            <i class="fas fa-check-circle"></i>
            Message envoyé avec succès!
          </div>
          <div class="error-message" *ngIf="submitError">
            <i class="fas fa-exclamation-circle"></i>
            Une erreur est survenue. Veuillez réessayer.
          </div>
        </div>
      </form>
    </div>
  </div>
</section>
